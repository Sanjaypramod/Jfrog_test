on:                                                                                                                                    push:
    branches:                                                                                                                              - master                                                                                                                                                                                                                                                            jobs:                                                                                                                                  build-and-push:
    runs-on: ubuntu-latest                                                                                                                                                                                                                                                    steps:                                                                                                                                 - name: Checkout code
        uses: actions/checkout@v2                                                                                                                                                                                                                                               - name: Log in to Harbor
        run: echo "${{ secrets.HARBOR_PASSWORD }}" | docker login -u "${{ secrets.HARBOR_USERNAME }}" --password-stdin https://registry.devopspoc.online                                                                                                                                                                                                                                                             - name: Build Docker image                                                                                                             run: docker build -t https://registry.devopspoc.online/jfrog_repo/python-app:v1 .                                                                                                                                                                                       - name: Push Docker image to Harbor
        run: docker push https://registry.devopspoc.online/jfrog_repo/python-app:v1                                                                                                                                                                                       ~                                                                                                                                    ~                                                                                                                                    ~                                                                                                                                    ~                                                         
